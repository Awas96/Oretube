<?xml version="1.0" encoding="utf-8"?>

<!--
  Para obtener más información sobre cómo configurar la aplicación ASP.NET, visite
  https://go.microsoft.com/fwlink/?LinkId=169433
  -->

<configuration>

  <connectionStrings>
    <add name="oretubeConnectionString" connectionString="Data Source=(local);Initial Catalog=oretube;Integrated Security=True" providerName="System.Data.SqlClient" />
    <add name="SqlServices" connectionString="Data Source=(local);Initial Catalog=aspnetdb;Integrated Security=SSPI;" />
  </connectionStrings>

  <system.web>
    <compilation debug="true" strict="false" explicit="true" targetFramework="4.7.2" />
    <httpRuntime targetFramework="4.7.2" />

    <authentication mode="Forms">
      <forms loginUrl="login.aspx" name=".ASPXFORMSAUTH" timeout="43200" defaultUrl="froles.aspx" />
    </authentication>

 
    <roleManager defaultProvider="SqlProvider" enabled="true" cacheRolesInCookie="true" cookieName=".SEGURIDAD" cookieTimeout="30" cookiePath="/" cookieRequireSSL="false" cookieSlidingExpiration="true" cookieProtection="All">
      <providers>
        <add name="SqlProvider" type="System.Web.Security.SqlRoleProvider" connectionStringName="SqlServices" applicationName="SEGURIDAD" />
      </providers>
    </roleManager>


    <membership defaultProvider="SqlProvider" userIsOnlineTimeWindow="15">
      <providers>
        <add name="SqlProvider" type="System.Web.Security.SqlMembershipProvider" connectionStringName="SqlServices" applicationName="SEGURIDAD" />
      </providers>
    </membership>

    <pages>
      <controls>
        <add tagPrefix="ajaxToolkit" assembly="AjaxControlToolkit" namespace="AjaxControlToolkit" />
      </controls>
    </pages>
        <identity impersonate="false" />
  </system.web>

  <location path="Contenidos/Anonimo">
    <system.web>
      <authorization>
        <!-- Acceso a todos los usuarios-->
        <allow users="*" />
      </authorization>
    </system.web>
  </location>
  
  
  <location path="Contenidos/Registrado">
    <system.web>
      <authorization>
        <!-- Se le concede permiso al rol 0 y se le deniega al resto-->
        <allow roles="0" />
        <deny roles="1" />
        <deny roles="2" />
        <deny users="?" />
      </authorization>
    </system.web>
  </location>

  <location path="Contenidos/Lector">
    <system.web>
      <authorization>
        <allow roles="1" />
        <deny roles="2"/>
        <deny roles="0"/>
      </authorization>
    </system.web>
  </location>

  <location path="Contenidos/Editor">
    <system.web>
      <authorization>
        <allow roles="2" />
        <deny roles="1"/>
        <deny roles="3"/>
      </authorization>
    </system.web>
  </location>

  <appSettings>
    <!-- Deshabilitación de las validaciones no intrusivas -->
    <add key="ValidationSettings:UnobtrusiveValidationMode" value="None" />
  </appSettings>



  <system.webServer>
    <defaultDocument>
      <files>
        <add value="login.aspx" />
      </files>
    </defaultDocument>
  </system.webServer>


</configuration>
